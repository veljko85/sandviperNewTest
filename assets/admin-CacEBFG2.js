import{g as u,r as c,d as m,f as h,b as a,h as p,o as C,j as L,k as v}from"./discountCode-D1dMDzlt.js";let t={discountCode:null,adminUid:null,users:[]};function E(){u(c(m,"admin_data/uid")).then(e=>{e.exists()&&(t.adminUid=e.val())}).catch(e=>{})}E();const y=async()=>{try{await h(a,email.value,password.value),b(),o=!0}catch{authErrorDisplay.style.visibility="visible"}};let o=!1;loginButton.onclick=()=>y();document.addEventListener("keydown",e=>{e.key==="Enter"&&o===!1&&y()});const f=async()=>{try{await p(a),k(),o=!1}catch{}};logoutButton.onclick=()=>f();adminLogOutButton.onclick=()=>{f(),adminLoginContainer.style.display="flex",adminContainer.style.display="none"};function b(){C(a,e=>{e&&(e.uid===t.adminUid?D():authErrorDisplay.style.visibility="visible")})}function D(){var e,s;adminLoginContainer.style.display="none",adminContainer.style.display="flex",adminEmail.innerHTML=(s=(e=a)==null?void 0:e.currentUser)==null?void 0:s.email,L(t,"admin"),w(),changeDiscountCode.addEventListener("click",()=>{t.discountCode=discountCodeInput.value,v(t)})}function k(){email.value="",password.value="",authErrorDisplay.style.visibility="hidden"}async function w(){const e=c(m,"users");u(e).then(s=>{t.users=s.val();let g=document.getElementById("usersList");for(let i=1;i<t.users.length;i++){let n=document.createElement("div");n.classList.add("user"),g.appendChild(n),i===t.users.length-1&&(n.style.marginBottom="50px"),i%2===0&&(n.style.backgroundColor="#f5f5f5");let d=document.createElement("h3");d.classList.add("userNumber"),d.innerHTML=i,n.appendChild(d);let l=document.createElement("h3");l.classList.add("userEmail"),l.innerHTML=t.users[i].user_email,n.appendChild(l);let r=document.createElement("h3");r.classList.add("userDiscountCode"),r.innerHTML=t.users[i].user_get_discount_code,n.appendChild(r)}})}
